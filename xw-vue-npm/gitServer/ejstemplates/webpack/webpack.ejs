const merge = require('webpack-merge');
const webpack = require('webpack');
const common = require('./webpack.common');

module.exports = merge(common,{
    mode:"development",
    devtool:'eval-source-map',
    devServer:{
        contentBase:["./dist"],
        hot:true,
        watchContentBase: true,
        openPage:"./index.html",
        port:9985,
        proxy:{
            <%_ data.forEach((item)=>{ -%>
                '/<%= item.key %>':{
                target: '<%= item.url %>',
                secure: false,
                changeOrigin: true
                },
            <%_ })  -%>
        }
    },
    plugins:[
        new webpack.NamedModulesPlugin(),
        new webpack.HotModuleReplacementPlugin(),
    ],
    watchOptions: {
        ignored: /node_modules/
    }
})